# mathOperationsAPI

This API supports computation of different mathematical functions and provides a generated graphical UI (Swagger) with FastAPI.

---

## Tech Stack

- **Backend:** FastAPI and Python
- **Database:** SQLite (managed by SQLAlchemy)
- **Frontend:** Swagger UI (auto-generated by FastAPI)
- **Containerization:** Docker

---

## Functionalities

- **DB storage in SQLite** with timestamp.
- **Mathematical operations:** power, fibonacci sum, factorial.
- **Asynchronicity** for performing operations.
- **Deletion of stored data.**
- **Authorization for deletion** with Bearer token.
- **Logging of performed operations** in `operations.log`.
- **Local caching** using a dictionary to prevent duplicate values for computation.

---

## Installation & Running the App

1. **Create a virtual environment:**

    ```sh
    py -m venv venv
    ```

2. **Activate the environment:**

      ```sh
      .\venv\Scripts\activate
      ```

      
3. Install requirements:
    ```sh
    pip install -r requirements.txt
    ```

4. Start the server:
    ```sh
    uvicorn main:app --reload
    ```
    This will start the server, accessible at:  
    [http://127.0.0.1:8000](http://127.0.0.1:8000)

---

## Example API Calls (using Postman or similar tools)

**Compute:**
-  `POST`
    `http://127.0.0.1:8000/v1/operations/compute`
- **Request body examples:**

    Power (operand1^operand2):
    ```json
    {
      "operation": "pow",
      "operand1": 2,
      "operand2": 4
    }
    ```

    Fibonacci (n-th Fibonacci number):
    ```json
    {
      "operation": "fib",
      "operand1": 9
    }
    ```

    Factorial:
    ```json
    {
      "operation": "fact",
      "operand1": 2
    }
    ```

**Delete:**  
(Delete by ID or delete all. You will need to create a `.env` file where you initialize a token for auth like `BEARER_TOKEN = "something"`)
- By ID:  
  `DELETE`
 `http://127.0.0.1:8000/v1/operations/{replace_with_existing_operation_id}`
- Delete all:  
  `DELETE` `http://127.0.0.1:8000/v1/operations`

**Get:**  
- By ID:  
  `GET` `http://127.0.0.1:8000/v1/operations/{replace_with_existing_id}`
- Get all:  
  `GET` `http://127.0.0.1:8000/v1/operations`

---


### Docker (Containerized Setup with WSL + Rancher Desktop)

This project is containerized using **Docker**. It runs seamlessly in a **WSL (Windows Subsystem for Linux)** environment with **Rancher Desktop**.

>  You can verify Docker is working inside WSL by running `docker info`.


1. **Build the Docker image**
    ```sh
    docker build -t math-operations-api-container .
    ```

2. **Run the Docker container**
    ```sh
    docker run -p 8000:8000 math-operations-api-container
    ```

    The API will now be available at: [http://localhost:8000](http://localhost:8000)



---

## Swagger UI Frontend

For the frontend integrated by Swagger UI, access:  
`http://127.0.0.1:8000/docs`

---
